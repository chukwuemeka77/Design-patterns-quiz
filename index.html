<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Quiz App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .correct { background-color: #d4edda; }
    .wrong { background-color: #f8d7da; }
    #leaderboard-section { display: none; }
  </style>
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="text-center mb-4">Quiz App</h1>

  <div id="quiz-section" class="card shadow-sm p-4">
    <div id="timer" class="mb-3 text-end fw-bold text-danger">15:00</div>
    <div id="question-container"></div>
    <div class="mt-4 text-center">
      <button id="next-btn" class="btn btn-primary">Next</button>
      <button id="submit-btn" class="btn btn-success d-none">Submit Quiz</button>
    </div>
  </div>

  <div id="result-section" class="card shadow-sm p-4 mt-5 d-none">
    <h2 class="text-center mb-3">Result</h2>
    <p id="score" class="text-center fs-5 fw-bold"></p>
    <div id="review-container" class="mt-4"></div>
    <div class="text-center mt-4">
      <button onclick="restartQuiz()" class="btn btn-secondary">Restart Quiz</button>
      <button onclick="showLeaderboard()" class="btn btn-info">View Leaderboard</button>
    </div>
  </div>

  <div id="leaderboard-section" class="card shadow-sm p-4 mt-5">
    <h2 class="text-center mb-3">Leaderboard</h2>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Score</th>
          <th>Percentage</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody id="leaderboard-body"></tbody>
    </table>
  </div>

</div>

<script>
// 15 question database
const allQuestions = [
  { question: "What is the capital of France?", options: ["Paris", "Rome", "Berlin", "London"], answer: "Paris" },
  { question: "HTML stands for?", options: ["HyperText Markup Language", "Home Tool Markup Language", "Hyperlinks and Text Markup Language", "None"], answer: "HyperText Markup Language" },
  { question: "CSS stands for?", options: ["Colorful Style Sheets", "Cascading Style Sheets", "Computer Style Sheets", "Creative Style Sheets"], answer: "Cascading Style Sheets" },
  { question: "JS stands for?", options: ["Java Style", "JavaScript", "JustScript", "JollyScript"], answer: "JavaScript" },
  { question: "Which is not a JavaScript Framework?", options: ["Python Script", "JQuery", "Django", "NodeJS"], answer: "Django" },
  { question: "Which language runs in a web browser?", options: ["Java", "C", "Python", "JavaScript"], answer: "JavaScript" },
  { question: "What does DOM stand for?", options: ["Document Object Model", "Display Object Management", "Digital Ordinance Model", "Desktop Oriented Mode"], answer: "Document Object Model" },
  { question: "What year was JavaScript launched?", options: ["1996", "1995", "1994", "none of the above"], answer: "1995" },
  { question: "Bootstrap is mainly used for?", options: ["Database", "Design", "Server side scripting", "Machine learning"], answer: "Design" },
  { question: "Which tag is used for paragraphs in HTML?", options: ["<p>", "<div>", "<section>", "<span>"], answer: "<p>" },
  { question: "Which tag is used to link CSS?", options: ["<link>", "<script>", "<style>", "<meta>"], answer: "<link>" },
  { question: "Which CSS property changes text color?", options: ["text-color", "color", "font-color", "background-color"], answer: "color" },
  { question: "How do you create a function in JS?", options: ["function = myFunction()", "function myFunction()", "function:myFunction()", "def myFunction()"], answer: "function myFunction()" },
  { question: "Which operator is used to assign a value?", options: ["=", "-", "*", "+"], answer: "=" },
  { question: "Which keyword declare variables in JS?", options: ["var", "let", "const", "All of the above"], answer: "All of the above" }
];

let questions = [];
let currentQuestionIndex = 0;
let score = 0;
let timer;
let timeLeft = 900; // 15 minutes in seconds

function startQuiz() {
  questions = [...allQuestions].sort(() => 0.5 - Math.random()).slice(0, 5);
  currentQuestionIndex = 0;
  score = 0;
  document.getElementById('quiz-section').classList.remove('d-none');
  document.getElementById('result-section').classList.add('d-none');
  document.getElementById('leaderboard-section').style.display = 'none';
  showQuestion();
  startTimer();
}

function showQuestion() {
  const question = questions[currentQuestionIndex];
  const container = document.getElementById('question-container');
  container.innerHTML = `
    <h4>${currentQuestionIndex + 1}. ${question.question}</h4>
    ${question.options.map(opt => `
      <div class="form-check">
        <input class="form-check-input" type="radio" name="option" value="${opt}" id="${opt}">
        <label class="form-check-label" for="${opt}">${opt}</label>
      </div>
    `).join('')}
  `;
}

document.getElementById('next-btn').addEventListener('click', () => {
  const selected = document.querySelector('input[name="option"]:checked');
  if (!selected) {
    alert('Please select an answer!');
    return;
  }
  if (selected.value === questions[currentQuestionIndex].answer) {
    score++;
  }
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    showQuestion();
  } else {
    document.getElementById('next-btn').classList.add('d-none');
    document.getElementById('submit-btn').classList.remove('d-none');
  }
});

document.getElementById('submit-btn').addEventListener('click', finishQuiz);

function finishQuiz() {
  clearInterval(timer);
  document.getElementById('quiz-section').classList.add('d-none');
  document.getElementById('result-section').classList.remove('d-none');
  const percentage = ((score / questions.length) * 100).toFixed(2);
  document.getElementById('score').innerText = `You scored ${score}/${questions.length} (${percentage}%)`;
  showReview();
  updateLeaderboard(score, percentage);
}

function showReview() {
  const review = questions.map((q, index) => {
    const isCorrect = document.querySelector(`input[name="option"]:checked[value="${q.answer}"]`) !== null;
    return `
      <div class="p-2 mb-2 ${isCorrect ? 'correct' : 'wrong'} rounded">
        <strong>Q${index + 1}:</strong> ${q.question}<br>
        <small>Correct Answer: <u>${q.answer}</u></small>
      </div>
    `;
  }).join('');
  document.getElementById('review-container').innerHTML = review;
}

function restartQuiz() {
  document.getElementById('next-btn').classList.remove('d-none');
  document.getElementById('submit-btn').classList.add('d-none');
  startQuiz();
}

function startTimer() {
  timer = setInterval(() => {
    timeLeft--;
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    document.getElementById('timer').innerText = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    if (timeLeft <= 0) {
      clearInterval(timer);
      finishQuiz();
    }
  }, 1000);
}

function updateLeaderboard(score, percentage) {
  const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
  leaderboard.push({ score, percentage, date: new Date().toLocaleString() });
  leaderboard.sort((a, b) => b.score - a.score);
  localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
}

function showLeaderboard() {
  const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
  const body = leaderboard.map((entry, index) => `
    <tr>
      <td>${index + 1}</td>
      <td>${entry.score}</td>
      <td>${entry.percentage}%</td>
      <td>${entry.date}</td>
    </tr>
  `).join('');
  document.getElementById('leaderboard-body').innerHTML = body;
  document.getElementById('leaderboard-section').style.display = 'block';
}

// Start quiz when page loads
startQuiz();
</script>

</body>
  </html>
  
