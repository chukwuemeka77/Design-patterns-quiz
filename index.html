<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OOP & Design Patterns Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
    }
    #timer {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
      color: red;
    }
    .question {
      display: none;
    }
    .question.active {
      display: block;
    }
    button {
      margin: 5px;
    }
    .correct {
      color: green;
    }
    .wrong {
      color: red;
    }
    .explanation {
      margin-top: 10px;
      font-size: 16px;
    }
    #leaderboard {
      margin-top: 30px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #eee;
    }
  </style>
</head>
<body>

  <h1>OOP & Design Patterns Quiz</h1>

  <div id="timer">Time Left: 15 minutes</div>

  <form id="quizForm">
    <div id="nameDiv">
      <p><strong>Enter your name:</strong></p>
      <input type="text" id="username" placeholder="Your Name" required>
      <br><br>
      <button type="button" onclick="startQuiz()">Start Quiz</button>
    </div>

    <div class="question" id="q1">
      <p><strong>1. What does the Singleton pattern ensure?</strong></p>
      <input type="radio" name="q1" value="a"> (a) Multiple objects exist<br>
      <input type="radio" name="q1" value="b"> (b) Only one object exists<br>
      <input type="radio" name="q1" value="c"> (c) No objects are created<br>
      <br>
      <button type="button" onclick="lockAnswer()">Submit Answer</button>
    </div>

    <div class="question" id="q2">
      <p><strong>2. How do we access the Singleton object?</strong></p>
      <input type="radio" name="q2" value="a"> (a) By calling `new` many times<br>
      <input type="radio" name="q2" value="b"> (b) By using a static method like `getInstance()`<br>
      <input type="radio" name="q2" value="c"> (c) By copying it<br>
      <br>
      <button type="button" onclick="lockAnswer()">Submit Answer</button>
    </div>

    <div class="question" id="q3">
      <p><strong>3. Why is the constructor private in Singleton?</strong></p>
      <input type="radio" name="q3" value="a"> (a) To allow easy creation<br>
      <input type="radio" name="q3" value="b"> (b) To prevent creating multiple instances<br>
      <input type="radio" name="q3" value="c"> (c) To make the code faster<br>
      <br>
      <button type="button" onclick="lockAnswer()">Submit Answer</button>
    </div>

    <div class="question" id="q4">
      <p><strong>4. What is a core feature of Object-Oriented Programming (OOP)?</strong></p>
      <input type="radio" name="q4" value="a"> (a) Reusability<br>
      <input type="radio" name="q4" value="b"> (b) Speed<br>
      <input type="radio" name="q4" value="c"> (c) Text-based interface<br>
      <br>
      <button type="button" onclick="lockAnswer()">Submit Answer</button>
    </div>

    <div class="question" id="q5">
      <p><strong>5. What is the primary purpose of the Factory Method pattern?</strong></p>
      <input type="radio" name="q5" value="a"> (a) To create a single instance of a class<br>
      <input type="radio" name="q5" value="b"> (b) To abstract object creation logic<br>
      <input type="radio" name="q5" value="c"> (c) To store objects<br>
      <br>
      <button type="button" onclick="lockAnswer()">Submit Answer</button>
    </div>
  </form>

  <h2 id="score"></h2>
  <div id="explanations"></div>

  <div id="leaderboard" style="display: none;">
    <h2>Leaderboard</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Score</th>
          <th>Percentage</th>
        </tr>
      </thead>
      <tbody id="leaderboardBody"></tbody>
    </table>
  </div>

  <script>
    var currentQuestion = 1;
    var totalQuestions = 5;
    var timeLeft = 900; // 15 minutes
    var timer;
    var username = "";

    const answers = {
      q1: 'b',
      q2: 'b',
      q3: 'b',
      q4: 'a',
      q5: 'b'
    };

    function updateTimer() {
      document.getElementById('timer').innerText = `Time Left: ${Math.floor(timeLeft / 60)} minutes ${timeLeft % 60} seconds`;
      if (timeLeft <= 0) {
        clearInterval(timer);
        alert("Time's up! Submitting your quiz...");
        submitQuiz();
      }
      timeLeft--;
    }

    function startTimer() {
      timer = setInterval(updateTimer, 1000);
    }

    function startQuiz() {
      username = document.getElementById('username').value.trim();
      if (username === "") {
        alert("Please enter your name first!");
        return;
      }
      document.getElementById('nameDiv').style.display = "none";
      showQuestion();
      startTimer();
    }

    function showQuestion() {
      for (var i = 1; i <= totalQuestions; i++) {
        document.getElementById('q' + i).classList.remove('active');
      }
      document.getElementById('q' + currentQuestion).classList.add('active');
    }

    function lockAnswer() {
      var form = document.getElementById('quizForm');
      var selected = form['q' + currentQuestion].value;

      if (!selected) {
        alert('Please select an answer before submitting.');
        return;
      }

      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        showQuestion();
      } else {
        submitQuiz();
      }
    }

    function submitQuiz() {
      clearInterval(timer);

      var score = 0;
      var form = document.getElementById('quizForm');
      var explanations = "";

      for (var i = 1; i <= totalQuestions; i++) {
        var question = 'q' + i;
        var userAnswer = form[question].value;

        if (userAnswer === answers[question]) {
          score++;
          explanations += `<p class="correct"><strong>Q${i} Correct:</strong> ${getExplanation(question, true)}</p>`;
        } else {
          explanations += `<p class="wrong"><strong>Q${i} Wrong:</strong> ${getExplanation(question, false)}</p>`;
        }
      }

      var percentage = (score / totalQuestions) * 100;

      document.getElementById('score').innerHTML = `You scored ${score}/${totalQuestions} (${percentage.toFixed(2)}%)`;
      document.getElementById('explanations').innerHTML = `<div class="explanation">${explanations}</div>`;

      saveToLeaderboard(username, score, percentage);
      displayLeaderboard();

      document.getElementById('quizForm').style.display = 'none';
      document.getElementById('timer').style.display = 'none';
    }

    function getExplanation(question, correct) {
      const messages = {
        q1: {
          correct: "Singleton ensures only one object exists.",
          wrong: "Singleton ensures a single object exists, not multiple or none."
        },
        q2: {
          correct: "We access it by a static method like getInstance().",
          wrong: "Calling new many times would create multiple objects."
        },
        q3: {
          correct: "Private constructor prevents outside code from making new objects.",
          wrong: "Without private constructor, anyone could create multiple instances."
        },
        q4: {
          correct: "Reusability is a key feature of OOP.",
          wrong: "OOP's primary feature is reusability, not speed or text-based interfaces."
        },
        q5: {
          correct: "Factory Method abstracts object creation logic, ensuring flexibility.",
          wrong: "Factory
        
